function drawCharts(){jQuery("div.sro-report").each(function(e){var t=new google.visualization.DataTable;jQuery("th",jQuery("thead:first-child",jQuery(this))).each(function(e){t.addColumn(0===e?"string":"number",this.innerHTML)});var a=0,i=jQuery("tbody tr",jQuery(this)).map(function(){return[jQuery("td",this).map(function(){return isNaN(this.innerHTML)?this.innerHTML:(a=Number(this.innerHTML)>a?Number(this.innerHTML):a,Number(this.innerHTML))}).get()]}).get();if(1!==i[0].length){t.addRows(i);var r={colors:["#E8D790","#D98372","#C76274","#7F616F","#7F9799"],vAxis:{minValue:0,maxValue:a}},s="chart_"+(e+1);jQuery(this).find(".chart").attr("id",s);var n=new google.visualization.ColumnChart(document.getElementById(s));n.draw(t,r)}})}jQuery("document").ready(function(){function e(){jQuery(this);var e=jQuery(this).data("nonce"),t=jQuery(this).data("id"),a=jQuery(this).data("hash");if(e&&a){var i={action:"unlinkSearch",id:t,nonce:e,hash:a};jQuery.post(ajaxurl,i,function(e){e=jQuery.parseJSON(e),1===e.error?void 0!==e.message&&alert(e.message):jQuery('a.sro-unlink-search[data-id="'+i.id+'"]').parent().fadeOut()})}}jQuery("a.sro-unlink-search",".sro").on("click",e),jQuery("a.sro.add-theme").on("click",function(){if(jQuery("tr.highlight").removeClass("highlight").find(".ajaxtag,.column-themes span.delete").remove(),0==jQuery(this).siblings(".ajaxtag").length){var t=jQuery(this).data("hash"),a=[];a.push('<span class="delete"> | <a href="#cancel" class="cancel-add-theme">Cancel</a></span>','<div class="ajaxtag hide-if-no-js">','<label class="screen-reader-text" for="new-theme">Themes</label>','<div class="taghint" style="">Add New Theme</div>','<p><input type="text" id="new-theme" name="newtheme" class="newtag form-input-tip" size="24" autocomplete="off" value="">','<input type="hidden" name="hash" value="'+t+'">','<input type="button" class="button themeadd" value="Add"></p>',"</div>"),jQuery("a[data-hash="+t+"]").parents("tr").addClass("highlight");var i=jQuery(this).data("nonce");jQuery(this).after(a.join(""));var r=jQuery(this).siblings("div").find("input.button.themeadd");jQuery("a.cancel-add-theme").on("click",function(){jQuery(this).parent().siblings("div.ajaxtag").remove(),jQuery(".highlight").removeClass("highlight"),jQuery(this).parent().remove()}),jQuery(r).click(function(){var a={action:"linkSearch",nonce:i,hash:t,name:jQuery(this).siblings('input[name="newtheme"]').val()};""!=a.name&&jQuery.post(ajaxurl,a,function(t){t=jQuery.parseJSON(t),1===t.error?void 0!==t.message&&alert(t.message):(jQuery(".highlight").find("div.tagchecklist.sro").append("<span><a data-id='"+t.id+"' data-nonce='"+t.nonce+"' data-hash='"+a.hash+"' class='sro-unlink-search ntdelbutton'>X</a>&nbsp;"+a.name+"</span>"),jQuery('a[data-id="'+t.id+'"]',".highlight").on("click",e),jQuery(".highlight").find("a.sro.add-theme").html(jQuery(".highlight").find("a.sro.add-theme").data("alternate")),jQuery(".highlight").find("span.delete").remove()),jQuery(r).parents(".ajaxtag").remove(),jQuery(".highlight").removeClass("highlight")})})}jQuery(this).siblings("div").find(".newtag").focus()}),jQuery("input.themeadd",".sro-searches-edit").click(function(){var t={action:"linkSearch",nonce:jQuery(this).siblings('input[name="themenonce"]').val(),hash:jQuery(this).siblings('input[name="hash"]').val(),name:jQuery(this).siblings("input#new-theme").val()};""!=t.name&&jQuery.post(ajaxurl,t,function(a){a=jQuery.parseJSON(a),1===a.error?void 0!==a.message&&alert(a.message):(jQuery("div.tagchecklist.sro").append('<span><a data-id="'+a.id+'" data-nonce="'+a.nonce+'" data-hash="'+t.hash+'" class="sro-unlink-search ntdelbutton">X</a>&nbsp;'+t.name+"</span>"),jQuery('a[data-id="'+a.id+'"]',".sro").on("click",e),jQuery("input#new-theme").val(""))})}),jQuery("div.sro-searches").sortable({opacity:.6,revert:!0,cursor:"move",items:".sro-result",stop:function(){jQuery('input[name="order"]').val(""),jQuery("div.sro-result").each(function(){var e=jQuery(this);jQuery('input[name="order"]').val(function(t,a){return a+(a?",":"")+jQuery(e).data("id")})}),jQuery("div.sro-pin","div.sro-result.pinned:not(:first-child)").each(function(){jQuery(this).html(jQuery(this).data("unpinned-text")).parents("div.sro-result").removeClass("pinned")}),jQuery("div.sro-result.pinned:first-child").length?jQuery('input[name="pin"]').val(jQuery("div.sro-result.pinned:first-child").data("id")):jQuery('input[name="pin"]').val("")}}),jQuery("div.sro-pin").click(function(){jQuery('input[name="pin"]').val(""),jQuery(this).parents("div.sro-result").hasClass("pinned")?(jQuery(this).parents("div.sro-result").removeClass("pinned"),jQuery(this).html(jQuery(this).data("unpinned-text"))):(jQuery(this).parents("div.sro-result").addClass("pinned").siblings("div.sro-result").removeClass("pinned"),jQuery(this).html(jQuery(this).data("pinned-text")),jQuery("div.sro-result.pinned:first-child").length&&jQuery('input[name="pin"]').val(jQuery(this).parents("div.sro-result").data("id")))}),jQuery("#searchresultsoptimizer_result_highlighting_colour").wpColorPicker(),jQuery("input#searchresultsoptimizer_sorting_popularity").change(function(){"checked"==jQuery(this).attr("checked")?jQuery("select#searchresultsoptimizer_sorting_secondary,input#searchresultsoptimizer_result_pinning_enabled").removeAttr("disabled"):jQuery("select#searchresultsoptimizer_sorting_secondary,input#searchresultsoptimizer_result_pinning_enabled").attr("disabled","disabled")}),jQuery("input#searchresultsoptimizer_advanced_search_enabled").change(function(){"checked"==jQuery(this).attr("checked")?jQuery("input#searchresultsoptimizer_metadata_filters_tags,input#searchresultsoptimizer_metadata_filters_categories,input#searchresultsoptimizer_metadata_filters_types").removeAttr("disabled"):jQuery("input#searchresultsoptimizer_metadata_filters_tags,input#searchresultsoptimizer_metadata_filters_categories,input#searchresultsoptimizer_metadata_filters_types").attr("disabled","disabled")})}),google.load("visualization","1.0",{packages:["corechart"]}),jQuery(".sro-report").length&&google.setOnLoadCallback(drawCharts);